<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>현대자동차 특별조건 검색엔진</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .nav-dark { background-color: #111; }
        .tab-active { color: #0070f3; border-bottom: 2px solid #0070f3; }
        .filter-box { background: #f9f9f9; border: 1px solid #eaeaea; }
        th { background: #fafafa; color: #666; font-weight: 600; font-size: 13px; border-bottom: 1px solid #eaeaea; padding: 12px; }
        td { padding: 12px; border-bottom: 1px solid #eaeaea; font-size: 14px; }
    </style>
</head>
<body class="bg-white">
    <nav class="nav-dark text-white p-3 text-sm flex justify-between px-6">
        <div class="font-bold text-lg">HYUNDAI <span class="font-light text-gray-400">CHUNGBUK</span></div>
        <div class="flex gap-4 items-center">
            <span class="text-gray-400 text-xs">최근 업데이트: <span id="update-date">-</span></span>
        </div>
    </nav>

    <div class="border-b overflow-x-auto whitespace-nowrap scrollbar-hide">
        <div id="tab-menu" class="flex px-4 gap-6 text-sm font-medium text-gray-500">
            </div>
    </div>

    <div class="p-6">
        <div class="filter-box p-4 rounded-lg flex flex-wrap gap-4 items-end">
            <div class="flex flex-col gap-2">
                <label class="text-xs font-bold text-gray-400 uppercase">Model Detail</label>
                <select id="select-trim" onchange="applyFilters()" class="border p-2 rounded text-sm w-48 focus:outline-none">
                    <option value="">전체 트림</option>
                </select>
            </div>
            <div class="flex flex-col gap-2">
                <label class="text-xs font-bold text-gray-400 uppercase">Color</label>
                <select id="select-color" onchange="applyFilters()" class="border p-2 rounded text-sm w-40 focus:outline-none">
                    <option value="">전체 색상</option>
                </select>
            </div>
            <button onclick="resetFilters()" class="text-sm text-gray-400 underline ml-auto">초기화</button>
        </div>
    </div>

    <div class="px-6 pb-20">
        <div class="mb-4 text-sm"><span id="result-count" class="font-bold">0</span> 대의 검색 결과</div>
        <div class="overflow-x-auto border rounded-lg">
            <table class="w-full text-left border-collapse">
                <thead>
                    <tr id="table-header"></tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
        </div>
    </div>

    <script>
        let allData = {};
        let currentModel = "";

        async function loadData() {
            try {
                const res = await fetch('/api/cars');
                allData = await res.json();
                const models = Object.keys(allData);
                
                // 탭 생성
                const tabMenu = document.getElementById('tab-menu');
                tabMenu.innerHTML = models.map(m => `
                    <button onclick="selectTab('${m}')" id="tab-${m}" class="py-4 px-2 cursor-pointer transition-all">${m}</button>
                `).join('');

                if(models.length > 0) selectTab(models[0]);
                document.getElementById('update-date').innerText = new Date().toLocaleDateString();
            } catch(e) { console.error("데이터 로드 실패"); }
        }

        function selectTab(model) {
            currentModel = model;
            // 탭 활성화 디자인 처리
            document.querySelectorAll('#tab-
